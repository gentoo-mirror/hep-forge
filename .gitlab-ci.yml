stages:
  - checksingle
  - build
  - test
  - qa
  - checkall

workflow:
  rules:
    - if: $CI_PIPELINE_SOURCE == "merge_request_event" || ($CI_PIPELINE_SOURCE == "push" && $CI_COMMIT_BRANCH=="master") || $TEST_ALL == "1" || $PROBABILITY

variables:
  REPO_NAME: "hep-forge"

default:
  image: apnpucky/gentoo-hep-forge:latest

.images: &images
  IMAGE:
    [
      apnpucky/gentoo-hep-forge:latest,
      apnpucky/gentoo-hep-forge-unstable:latest,
    ]

.matrix1: &matrix1
  parallel:
    matrix:
      - PKG: [cernlib]
        VERSION: ["2006-r8"]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [resummino]
        VERSION: [3.1.2]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [nll-fast]
        VERSION: ["3.1"]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [nnll-fast]
        VERSION: ["2.0"]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [oneloop]
        VERSION: [2020.07.31, "3.6"]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [qcdloop]
        VERSION: [2.0.9, 2.0.5]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [mcfm]
        VERSION: ["10.2.1"]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [yoda]
        VERSION: [9999, 1.9.8, 1.9.7]
        CATEGORY: ["sci-physics"]
        ARCH: [amd64, arm64, arm, riscv]
        <<: *images
      - ARCH: [amd64, arm64, arm, riscv]
        VERSION: [9999, "3.2.7", 3.2.6, 3.2.5, 2.06.11]
        PKG: [hepmc]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [delphes]
        VERSION: [9999, 3.5.0-r1]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [pyslha]
        VERSION: [3.2.6]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [evade]
        VERSION: [0.2.0]
        CATEGORY: ["sci-physics"]
        <<: *images

.matrix2: &matrix2
  parallel:
    matrix:
      - ARCH: [amd64]
        VERSION: [9999, 8.3.09-r3, 8.3.07-r5, 8.2.45-r5, 6.4.28]
        PKG: [pythia]
        CATEGORY: ["sci-physics"]
        <<: *images
      - ARCH: [amd64, arm, arm64, riscv]
        VERSION: [9999, "3.1.9", "3.1.8",  3.1.7]
        PKG: [rivet]
        CATEGORY: ["sci-physics"]
        <<: *images

.matrix2_0: &matrix2_0
  parallel:
    matrix:
      - ARCH: [amd64, arm, arm64, riscv]
        VERSION: ["3.4.2", "3.4.1",3.4.0]
        PKG: [fastjet]
        CATEGORY: ["sci-physics"]
        <<: *images
      - ARCH: [amd64, arm, arm64, riscv]
        VERSION: ["1.053", "1.052", "1.051", "1.049"]
        PKG: [fastjet-contrib]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [qgraf]
        VERSION: ["3.6.6",3.6.5, 3.5.2, 3.4.2]
        CATEGORY: ["sci-physics"]
        ARCH: [amd64]
        <<: *images
      - PKG: [topdrawer]
        VERSION: ["9999"]
        CATEGORY: ["sci-physics"]
        <<: *images
      - ARCH: [amd64, arm64, arm, riscv]
        VERSION: ["2.16", "2.15"]
        PKG: [looptools]
        CATEGORY: ["sci-physics"]
        <<: *images

      - PKG: [slhalib]
        VERSION: ["2.2"]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [fonll]
        VERSION: ["1.3.3"]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [correctionlib]
        VERSION: ["2.4.0", "2.3.3"]
        CATEGORY: ["dev-python"]
        <<: *images

.matrix2_1: &matrix2_1
  parallel:
    matrix:
      - ARCH: [amd64, arm, arm64, riscv]
        VERSION: [9999, 6.5.4, 6.3.0]
        PKG: [lhapdf]
        CATEGORY: ["sci-physics"]
        <<: *images

      - PKG: [ninja]
        VERSION: [1.1.0]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [samurai]
        VERSION: [2.1.1]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [golem95]
        VERSION: [1.3.3]
        CATEGORY: ["sci-physics"]
        <<: *images
      - ARCH: [amd64, arm, arm64, riscv]
        VERSION: ["1.2.8",1.2.7, 1.2.5]
        PKG: [collier]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [contur]
        VERSION: [2.4.0]
        CATEGORY: ["sci-physics"]
        <<: *images

.matrix3: &matrix3
  parallel:
    matrix:
      - PKG: [madgraph5]
        VERSION: [3.5.1, 3.5.0, 3.4.2]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [cgal]
        VERSION: ["5.6", 5.5.2]
        ARCH: [amd64, arm, arm64, riscv]
        CATEGORY: ["sci-mathematics"]
        <<: *images
      - PKG: [recola2]
        VERSION: [2.2.4]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [tauola]
        VERSION: [1.1.8-r1]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [photos]
        VERSION: ["3.64"]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [herwig]
        VERSION: [7.2.3, 6.5.21-r2]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [thepeg]
        VERSION: [2.2.3-r2]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [pyhepmc]
        VERSION: ["2.11.0",2.10.0]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [hepi]
        VERSION: [0.2.10, 0.2.8]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [handyg]
        VERSION: [0.1.5]
        CATEGORY: ["sci-libs"]
        <<: *images
      - PKG: [einspline]
        VERSION: [0.9.2]
        CATEGORY: ["sci-libs"]
        <<: *images
      - PKG: [cuba]
        VERSION: ["4.2.2", "4.2", "3.3"]
        CATEGORY: ["sci-libs"]
        <<: *images
      - PKG: [mpfun90]
        VERSION: ["2023.02.26"]
        CATEGORY: ["sci-libs"]
        <<: *images

.matrix4: &matrix4
  parallel:
    matrix:
      - PKG: [easybuild]
        VERSION: ["4.8.2", "4.7.0", 4.6.2-r1]
        CATEGORY: ["sys-cluster"]
        ARCH: [amd64]
        <<: *images
      - PKG: [lmod]
        VERSION: [8.6.14-r1]
        CATEGORY: ["sys-cluster"]
        <<: *images
      - PKG: [modules]
        VERSION: [4.6.0-r1]
        CATEGORY: ["sys-cluster"]
        <<: *images
      - PKG: [tex2pix]
        VERSION: [0.3.1]
        CATEGORY: ["dev-python"]
        <<: *images
      - PKG: [pathos]
        VERSION: [0.3.0]
        CATEGORY: ["dev-python"]
        <<: *images
      - PKG: [smpl]
        VERSION: [9999, 1.0.2]
        CATEGORY: ["dev-python"]
        <<: *images
      - PKG: [xsdata]
        VERSION: ["22.11"]
        CATEGORY: ["dev-python"]
        <<: *images

.matrix4_1: &matrix4_1
  parallel:
    matrix:
      - PKG: [archspec]
        VERSION: ["0.2.2","0.1.4"]
        CATEGORY: ["dev-python"]
        ARCH: [amd64]
        <<: *images
      - PKG: [jacobi]
        VERSION: ["0.8.1"]
        CATEGORY: ["dev-python"]
        <<: *images

.matrix5: &matrix5
  parallel:
    matrix:
      - PKG: [xgboost]
        VERSION: ["2.0.1","1.6.2"]
        CATEGORY: ["dev-python"]
        <<: *images
      - PKG: [sklearn2pmml]
        VERSION: ["0.93.0","0.92.1","0.92.0"]
        CATEGORY: ["sci-libs"]
        <<: *images
      - PKG: [cuttools]
        VERSION: [1.8.2]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [openloops]
        VERSION: [2.1.2]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [hoppet]
        VERSION: [1.2.0]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [apfel]
        VERSION: [3.0.6]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [apfelxx]
        VERSION: [4.7.0]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [applgrid]
        VERSION: [1.6.32]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [vegas]
        VERSION: ["5.4"]
        CATEGORY: ["sci-libs"]
        <<: *images
      - PKG: [mpfun90]
        VERSION: ["2023-02-26"]
        CATEGORY: ["sci-libs"]
        <<: *images
      - PKG: [iflow]
        VERSION: [1.0.0]
        CATEGORY: ["sci-libs"]
        <<: *images
      - PKG: [polylogarithm]
        VERSION: [6.15.0, 6.14.0]
        CATEGORY: ["sci-libs"]
        <<: *images
      - PKG: [sherpa]
        VERSION: [2.2.15, 2.2.12]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [whizard]
        VERSION: [3.1.3]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [lcio]
        VERSION: ["02.20"]
        CATEGORY: ["sci-physics"]
        <<: *images

.matrix6: &matrix6
  parallel:
    matrix:
      - PKG: [particle]
        VERSION: [9999, 0.23.0, "0.22.1", 0.22.0, 0.21.1]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [decaylanguage]
        VERSION: ["0.15.3",0.15.2]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [pyhf]
        VERSION: [0.7.5, "0.7.3","0.7.1",0.7.0]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [smodels]
        VERSION: ["2.3.0",2.2.1]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [professor]
        VERSION: [2.3.3]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [flavio]
        VERSION: ["2.5.0","2.4.0"]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [feynhiggs]
        VERSION: ["2.18.1"]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [softsusy]
        VERSION: ["4.1.13"]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [spheno]
        VERSION: ["4.0.5","3.3.8"]
        CATEGORY: ["sci-physics"]
        <<: *images


.matrix7: &matrix7
  parallel:
    matrix:
      - PKG: [powheg-box-v2-hvq]
        VERSION: [9999, 4027]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [powheg-box-v2-directphoton]
        VERSION: [9999, 4027]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [powheg-box-v2-dijet]
        VERSION: [9999, 4027]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [powheg-box-v2-trijet]
        VERSION: [9999, 4027]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [powheg-box-v2-Z]
        VERSION: [9999, 4027]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [powheg-box-v2-Zj]
        VERSION: [9999, 4027]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [powheg-box-v2-W]
        VERSION: [9999, 4027]
        CATEGORY: ["sci-physics"]
        <<: *images

.matrix8: &matrix8
  parallel:
    matrix:
      - PKG: [evtgen]
        VERSION: [02.02.01,02.02.00,01.07.00]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [checkmate]
        VERSION: [9999, 2.0.26]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [dyturbo]
        VERSION: [1.3.2]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [rapgap]
        VERSION: ["3.308"]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [hathor]
        VERSION: ["2.0"]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [xfitter]
        VERSION: [2.2.0]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [qcdnum]
        VERSION: ["18.00.00"]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [hell]
        VERSION: ["3.1", "3.0"]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [apfelgrid]
        VERSION: [1.0.5]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [fastnlo]
        VERSION: ["2.5"]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [pineappl]
        VERSION: [0.6.1]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [spey]
        VERSION: [0.1.2]
        CATEGORY: ["sci-physics"]
        <<: *images
      - PKG: [spey-pyhf]
        VERSION: [0.1.1]
        CATEGORY: ["sci-physics"]
        <<: *images


.matrix9: &matrix9
  parallel:
    matrix:
      - PKG: [numba]
        VERSION: [0.58.0, 0.57.1, 0.56.4]
        CATEGORY: ['dev-python']
        <<: *images
      - PKG: [awkward-cpp]
        VERSION: [24,22]
        CATEGORY: ['dev-python']
        <<: *images
      - PKG: [awkward]
        VERSION: [2.4.6,2.3.3]
        CATEGORY: ['dev-python']
        <<: *images
      - PKG: [coffea]
        VERSION: [9999, 0.7.22]
        CATEGORY: ['sci-physics']
        <<: *images
      - PKG: [uhi]
        VERSION: [0.4.0, 0.3.3]
        CATEGORY: ['dev-python']
        <<: *images
      - PKG: [hepstats]
        VERSION: [0.7.0]
        CATEGORY: ['dev-python']
        <<: *images
      - PKG: [mplhep]
        VERSION: [0.3.28]
        CATEGORY: ['sci-physics']
        <<: *images
      - PKG: [hist]
        VERSION: [2.7.1]
        CATEGORY: ['dev-python']
        <<: *images
      - PKG: [vector]
        VERSION: [1.1.0]
        CATEGORY: ['dev-python']
        <<: *images
      - PKG: [uproot]
        VERSION: [5.0.11]
        CATEGORY: ['sci-physics']
        <<: *images
      - PKG: [scikit-hep]
        VERSION: [0, 2023.08.01]
        CATEGORY: ['virtual']
        <<: *images
      - PKG: [gosam]
        VERSION: [9999, 2.1.1]
        CATEGORY: ['sci-physics']
        <<: *images
      - PKG: [hjets]
        VERSION: ['1.3']
        CATEGORY: ['sci-physics']
        <<: *images
      - PKG: [vbfnlo]
        VERSION: [3.0.0_beta5, 2.7.1]
        CATEGORY: ['sci-physics']
        <<: *images
      - PKG: [njet]
        VERSION: [3.1.2, 2.1.0, 2.0.0]
        CATEGORY: ['sci-physics']
        <<: *images
      - PKG: [starlight]
        VERSION: ['313']
        CATEGORY: ['sci-physics']
        <<: *images


.configgeneral:
  interruptible: true
  tags:
    - $ARCH
  before_script:
    - mkdir /var/db/repos/apn && printf "[apn]\nlocation = /var/db/repos/apn\nsync-type = git\nsync-uri = https://gitlab.com/APN-Pucky/gentoo-apn.git" >> /etc/portage/repos.conf/apn.conf && emaint -r apn sync
    - echo '*/*::apn * ~*' > /etc/portage/package.accept_keywords/apn
    - emerge --sync || emaint -r ${REPO_NAME} sync
    - emerge app-eselect/eselect-repository
    - eselect repository enable science && emaint -r science sync
    - pushd /var/db/repos/${REPO_NAME} && git remote set-branches origin '*' && git fetch -v --depth=1 && git pull --unshallow && git checkout ${CI_COMMIT_SHA} && popd
    - echo 'app-portage/pkg-testing-tools **' >> /etc/portage/package.accept_keywords/zz-autoaccept
    - emerge -q '>=app-portage/pkg-testing-tools-0.2.1'
    - echo 'dev-util/hermes ~*' >> /etc/portage/package.accept_keywords/zz-autoaccept
    - echo 'dev-python/uncertainties ~*' >> /etc/portage/package.accept_keywords/zz-autoaccept
    - echo 'dev-python/toposort ~*' >> /etc/portage/package.accept_keywords/zz-autoaccept
    - echo 'sci-physics/root ~*' >> /etc/portage/package.accept_keywords/zz-autoaccept
    - echo "*/*::${REPO_NAME} ~*" > /etc/portage/package.accept_keywords/${REPO_NAME}
    - echo '>=media-libs/libafterimage-1.20-r6 png gif tiff jpeg' >> /etc/portage/package.use/root
    - echo "=$CATEGORY/$PKG-$VERSION*::${REPO_NAME} **" >> /etc/portage/package.accept_keywords/${REPO_NAME}

.configall:
  extends: .configgeneral
  rules:
    - changes:
        - "$CATEGORY/$PKG/$PKG-$VERSION*.ebuild"
        - "$CATEGORY/$PKG/metadata.xml"
        - "$CATEGORY/$PKG/Manifest"
        - "$CATEGORY/$PKG/files/*"
        - "$CATEGORY/$PKG/.build"
        - ".build"

.config:
  extends: .configgeneral
  rules:
    - if: $ARCH == "amd64"
      changes:
        - "$CATEGORY/$PKG/$PKG-$VERSION*.ebuild"
        - "$CATEGORY/$PKG/metadata.xml"
        - "$CATEGORY/$PKG/Manifest"
        - "$CATEGORY/$PKG/files/*"
        - "$CATEGORY/$PKG/.build"
        - ".build"

local-pkgcheck:
  image: apnpucky/gentoo-ebuild-ci
  stage: checkall
  tags:
    - amd64
  before_script: 
    - emerge app-eselect/eselect-repository
    - eselect repository enable science && emaint -r science sync
  script:
    - pkgcheck scan --exit --quiet
  allow_failure: true

global-pkgcheck:
  image: apnpucky/gentoo-ebuild-ci
  stage: checkall
  tags:
    - amd64
  before_script:
    - emerge app-eselect/eselect-repository
    - eselect repository enable science && emaint -r science sync
    - echo '*/*::science ~*' > /etc/portage/package.accept_keywords/science
    - echo "[${REPO_NAME}]">> /etc/portage/repos.conf/${REPO_NAME}.conf
    - echo "location = /var/db/repos/${REPO_NAME}" >> /etc/portage/repos.conf/${REPO_NAME}.conf
    - echo "sync-type = git" >> /etc/portage/repos.conf/${REPO_NAME}.conf
    - echo "sync-uri = https://gitlab.com/APN-Pucky/gentoo-${REPO_NAME}.git" >> /etc/portage/repos.conf/${REPO_NAME}.conf
    - emaint -r ${REPO_NAME} sync
    - pushd /var/db/repos/${REPO_NAME} && git remote set-branches origin '*' && git fetch -v --depth=1 && git pull --unshallow && git checkout ${CI_COMMIT_SHA} && popd
  script:
    - pkgcheck ci -r ${REPO_NAME} --exit --quiet
  allow_failure: true

.check:
  image: apnpucky/gentoo-ebuild-ci
  extends: .config
  tags:
    - amd64
  stage: checksingle
  before_script: 
    - emerge app-eselect/eselect-repository
    - eselect repository enable science && emaint -r science sync
  script:
    - pkgcheck scan "=$CATEGORY/$PKG-$VERSION*::${REPO_NAME}" --exit

.warn:
  image: apnpucky/gentoo-ebuild-ci
  extends: .config
  tags:
    - amd64
  stage: checksingle
  before_script:
    - emerge app-eselect/eselect-repository
    - eselect repository enable science && emaint -r science sync
  script:
    - pkgcheck scan "=$CATEGORY/$PKG-$VERSION*::${REPO_NAME}" --exit warning || exit 137
  allow_failure:
    exit_codes: 137

.build:
  stage: build
  needs: []
  extends: .configall
  script:
    - USE="-root" emerge "=$CATEGORY/$PKG-$VERSION*::${REPO_NAME}" --autounmask=y --autounmask-write --autounmask-continue --autounmask-use=y 2>&1 | tee "build_$CATEGORY_$PKG-$VERSION.log";
  artifacts:
    when: always
    paths:
      - "build_*.log"
    expire_in: 1 week

.test:
  stage: test
  needs: []
  extends: .configall
  script:
    - if [[ -n $PROBABILITY ]] && [[ $(( RANDOM % 101 )) -gt $PROBABILITY ]] ; then exit 137 ; fi
    - pkg-testing-tool --append-emerge "--autounmask=y --autounmask-write --autounmask-continue --autounmask-use=y" --max-use-combinations 32 --ccache --extra-env-file 'test.conf' --append-required-use "!root" --test-feature-scope always -p "=$CATEGORY/$PKG-$VERSION*::${REPO_NAME}" --report test_$CATEGORY_$PKG-$VERSION.json 2>&1 | tee "test_$CATEGORY_$PKG-$VERSION.log";
  artifacts:
    when: always
    paths:
      - "test_*.log"
      - "test*.json"
    expire_in: 1 week
  allow_failure:
    exit_codes: 137

.qa:
  stage: qa
  extends: .config
  script:
    - ls *.log
    - (! grep -A10 -B10 "QA Notice" test_$CATEGORY_$PKG-$VERSION*.log)
  allow_failure: true

check1:
  extends: .check
  <<: *matrix1

warn1:
  extends: .warn
  <<: *matrix1

build1:
  extends: .build
  <<: *matrix1

test1:
  extends: .test
  <<: *matrix1

qa1:
  extends: .qa
  <<: *matrix1

check2:
  extends: .check
  <<: *matrix2

warn2:
  extends: .warn
  <<: *matrix2

build2:
  extends: .build
  <<: *matrix2

test2:
  extends: .test
  <<: *matrix2

qa2:
  extends: .qa
  <<: *matrix2

check2_0:
  extends: .check
  <<: *matrix2_0

warn2_0:
  extends: .warn
  <<: *matrix2_0

build2_0:
  extends: .build
  <<: *matrix2_0

test2_0:
  extends: .test
  <<: *matrix2_0

qa2_0:
  extends: .qa
  <<: *matrix2_0

check2_1:
  extends: .check
  <<: *matrix2_1

warn2_1:
  extends: .warn
  <<: *matrix2_1

build2_1:
  extends: .build
  <<: *matrix2_1

test2_1:
  extends: .test
  <<: *matrix2_1

qa2_1:
  extends: .qa
  <<: *matrix2_1

check3:
  extends: .check
  <<: *matrix3

warn3:
  extends: .warn
  <<: *matrix3

build3:
  extends: .build
  <<: *matrix3

test3:
  extends: .test
  <<: *matrix3

qa3:
  extends: .qa
  <<: *matrix3

check4:
  extends: .check
  <<: *matrix4

warn4:
  extends: .warn
  <<: *matrix4

build4:
  extends: .build
  <<: *matrix4

test4:
  extends: .test
  <<: *matrix4

qa4:
  extends: .qa
  <<: *matrix4

check4_1:
  extends: .check
  <<: *matrix4_1

warn4_1:
  extends: .warn
  <<: *matrix4_1

build4_1:
  extends: .build
  <<: *matrix4_1

test4_1:
  extends: .test
  <<: *matrix4_1

qa4_1:
  extends: .qa
  <<: *matrix4_1

check5:
  extends: .check
  <<: *matrix5

warn5:
  extends: .warn
  <<: *matrix5

build5:
  extends: .build
  <<: *matrix5

test5:
  extends: .test
  <<: *matrix5

qa5:
  extends: .qa
  <<: *matrix5

check6:
  extends: .check
  <<: *matrix6

warn6:
  extends: .warn
  <<: *matrix6

build6:
  extends: .build
  <<: *matrix6

test6:
  extends: .test
  <<: *matrix6

qa6:
  extends: .qa
  <<: *matrix6

check7:
  extends: .check
  <<: *matrix7

warn7:
  extends: .warn
  <<: *matrix7

build7:
  extends: .build
  <<: *matrix7

test7:
  extends: .test
  <<: *matrix7

qa7:
  extends: .qa
  <<: *matrix7


check8:
  extends: .check
  <<: *matrix8

warn8:
  extends: .warn
  <<: *matrix8

build8:
  extends: .build
  <<: *matrix8

test8:
  extends: .test
  <<: *matrix8

qa8:
  extends: .qa
  <<: *matrix8




check9:
  extends: .check
  <<: *matrix9

warn9:
  extends: .warn
  <<: *matrix9

build9:
  extends: .build
  <<: *matrix9

test9:
  extends: .test
  <<: *matrix9

qa9:
  extends: .qa
  <<: *matrix9
